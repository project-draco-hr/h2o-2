import os
from writers import *
import makeFilterTasks
import GenUtils
SEED = GenUtils.setup_random_seed()
with open('seed', 'wb') as f:
    f.write(str(SEED))
makeFilterTasks.genTasks()
os.system('git rev-parse HEAD > githash')
with open('./filterTasks', 'rb') as f:
    for line in f:
        with open('task', 'wb') as g:
            g.write(line)
        line = line.strip('\n').split(',')
        (TESTNAME, FU, data, dataPath, dataTask, taskType, FUParams) = line
        test = writeFU(FU, data, dataPath, dataTask, taskType, FUParams)
        with open((('./genTests/runit_' + TESTNAME.replace('-', '_')) + '.R'), 'wb') as t:
            t.write(test)
os.system('cd genTests; bash alter.sh')
os.system('cd genTests; bash cleanse.sh')
