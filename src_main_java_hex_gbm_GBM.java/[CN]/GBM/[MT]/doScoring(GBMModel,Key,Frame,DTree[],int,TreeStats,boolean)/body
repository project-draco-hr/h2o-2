{
  long now=System.currentTimeMillis();
  long sinceLastScore=now - _timeLastScoreStart;
  Score sc=null;
  if (finalScoring || (sinceLastScore > 4000 && (double)(_timeLastScoreEnd - _timeLastScoreStart) / sinceLastScore < 0.1)) {
    _timeLastScoreStart=now;
    sc=new Score().doIt(model,fr,validation).report(Sys.GBM__,tid,ktrees);
    _timeLastScoreEnd=System.currentTimeMillis();
  }
  model=new GBMModel(model,finalScoring ? null : ktrees,sc == null ? Float.NaN : (float)sc._sum / _nrows,sc == null ? null : sc._cm,tstats);
  DKV.put(outputKey,model);
  return model;
}
