def resolve_conf(self):
    conn = boto.connect_ec2()
    reservations = conn.get_all_instances([iid['id'] for iid in INSTANCES_IDs])
    instances = [i for r in reservations for i in r.instances]
    allRunning = True
    for (node_conf, inst) in zip(self.nodes_conf, instances):
        if (not (inst.state == 'running')):
            allRunning = False
            log(('Instance %s is not running. Please launch it!' % inst.id))
        node_conf['public_ip'] = inst.ip_address
        node_conf['private_ip'] = inst.private_ip_address
    if (not allRunning):
        log('Some of instances do not run! Exiting ...')
        sys.exit((-1))
    self.cldbs = [inst['private_ip'] for inst in filter((lambda x: (x['cldb'] == True)), self.nodes_conf)]
    self.zookeepers = [inst['private_ip'] for inst in filter((lambda x: (x['zookeeper'] == True)), self.nodes_conf)]
    self.nodes = [MaprNode(conf) for conf in self.nodes_conf]
