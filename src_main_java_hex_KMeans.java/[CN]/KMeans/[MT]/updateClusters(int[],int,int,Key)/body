{
  final int[] message=new int[count];
  System.arraycopy(clusters,0,message,0,message.length);
  new Atomic(){
    @Override public Value atomic(    Value val){
      byte[] data;
      if (val == null)       data=MemoryManager.malloc1((int)ValueArray.CHUNK_SZ);
 else       data=val.memOrLoad();
      AutoBuffer b=new AutoBuffer(data);
      for (int i=0; i < message.length; i++)       b.put4(offset + i,message[i]);
      return new Value(chunkKey,val._max,b.buf(),(short)val.type(),val._persist);
    }
  }
.invoke(chunkKey);
}
