{
  for (; ; ) {
    int state=get();
switch (state) {
case RUNNING:
{
        if (compareAndSet(state,IDLE))         return true;
        break;
      }
case RUNNING_SCHEDULED:
{
      if (compareAndSet(state,RUNNING))       return false;
      break;
    }
}
}
}
