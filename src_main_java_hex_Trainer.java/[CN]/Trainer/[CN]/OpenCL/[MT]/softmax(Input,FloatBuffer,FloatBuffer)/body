{
  float max=Float.NEGATIVE_INFINITY;
  for (int o=0; o < a.capacity(); o++)   if (max < a.get(o))   max=a.get(o);
  float scale=0;
  for (int o=0; o < a.capacity(); o++) {
    a.put(o,(float)Math.exp(a.get(o) - max));
    scale+=a.get(o);
  }
  for (int o=0; o < a.capacity(); o++) {
    a.put(o,a.get(o) / scale);
    e.put(o,(o == input.label() ? 1 : 0) - a.get(o));
  }
}
