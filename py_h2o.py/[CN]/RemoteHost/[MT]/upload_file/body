def upload_file(self, f, progress=None):
    f = find_file(f)
    if (f not in self.uploaded):
        import md5
        m = md5.new()
        m.update(open(f).read())
        m.update(getpass.getuser())
        dest = ((('/tmp/' + m.hexdigest()) + '-') + os.path.basename(f))
        sftp = self.ssh.open_sftp()
        sftp.put(f, dest, callback=progress)
        sftp.close()
        self.uploaded[f] = dest
    return self.uploaded[f]
