def test_log_download_terminate(self):
    csvPathnamegz = h2o.find_file('smalldata/hhp_9_17_12.predict.data.gz')
    h2o_cmd.runRF(trees=6, timeoutSecs=30, csvPathname=csvPathnamegz)
    for h in h2o.nodes:
        h.log_view()
        h.log_download(timeoutSecs=3)
    h2o.nodes[1].terminate_self_only()
    time.sleep(5)
    print 'Checking cloud size at nodes 0 and 2 after terminating 1'
    nodesNow = [h2o.nodes[0], h2o.nodes[2]]
    expectedSize = len(nodesNow)
    cloudSizes = [n.get_cloud()['cloud_size'] for n in nodesNow]
    cloudConsensus = [n.get_cloud()['consensus'] for n in nodesNow]
    for s in cloudSizes:
        consensusStr = ','.join(map(str, cloudConsensus))
        sizeStr = ','.join(map(str, cloudSizes))
        if (s != expectedSize):
            raise Exception(('Inconsistent cloud size.' + ('nodes report size: %s consensus: %s instead of %d.' % (sizeStr, consensusStr, expectedSize))))
    (logNameList, lineCountList) = h2o_log.checkH2OLogs()
    nodesNum = len(h2o.nodes)
    self.assertEqual(len(logNameList), nodesNum, (('Should be ' + nodesNum) + ' logs'))
    self.assertEqual(len(lineCountList), nodesNum, (('Should be ' + nodesNum) + ' logs'))
    for i in range(nodesNum):
        self.assertGreater(lineCountList[i], 12, (('node ' + str(i)) + ' log is too small'))
