{
  _len=len;
  _elsz=esz;
  int x=_elsz, log=0;
  while (x > 1) {
    x=x >> 1;
    ++log;
  }
  _elsz_log=log;
  assert(_elsz == 0 || _elsz == 1 || _elsz == 2 || _elsz == 4 || _elsz == 8);
  _idsz=(len >= 65535) ? 4 : 2;
  byte[] buf=MemoryManager.malloc1((nzs) * (_idsz + esz) + OFF);
  UDP.set4(buf,0,len);
  byte b=(byte)_idsz;
  buf[4]=b;
  buf[5]=(byte)_elsz;
  _mem=buf;
}
