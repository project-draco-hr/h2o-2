{
  ArrayList<String> args=new ArrayList<String>();
  File onWindows=new File("C:/cygwin/bin/rsync.exe");
  args.add(onWindows.exists() ? onWindows.getAbsolutePath() : "rsync");
  args.add("-vrzute");
  args.add(ssh(_user,_key));
  args.add("--delete");
  args.add("--chmod=u=rwx");
  args.add("--exclude");
  args.add("'build/*.jar'");
  args.add("--exclude");
  args.add("'lib/hexbase_impl.jar'");
  args.add("--exclude");
  args.add("'lib/javassist'");
  ArrayList<String> sources=new ArrayList<String>();
  sources.add("build");
  sources.add("lib");
  for (int i=0; i < sources.size(); i++) {
    String path=new File(sources.get(i)).getAbsolutePath();
    sources.set(i,path.replace('\\','/').replace("C:/","/cygdrive/c/"));
  }
  args.addAll(sources);
  args.add(_host + ":" + "/home/"+ _user+ "/"+ TARGET);
  ProcessBuilder builder=new ProcessBuilder(args);
  builder.environment().put("CYGWIN","nodosfilewarning");
  builder.redirectErrorStream(true);
  Process process=null;
  try {
    process=builder.start();
    SeparateVM.inheritIO(process,"rsync to " + _host,true);
    process.waitFor();
  }
  finally {
    if (process != null) {
      try {
        process.destroy();
      }
 catch (      Exception _) {
      }
    }
  }
}
