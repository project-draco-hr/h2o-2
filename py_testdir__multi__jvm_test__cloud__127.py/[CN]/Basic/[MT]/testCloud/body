def testCloud(self):
    baseport = 54300
    ports_per_node = 3
    for tryNodes in range(2, 8):
        sys.stdout.write('.')
        sys.stdout.flush()
        start = time.time()
        h2o.build_cloud(use_this_ip_addr='127.0.0.1', node_count=tryNodes, timeoutSecs=30)
        print ('Build cloud of %d in %d secs' % (tryNodes, (time.time() - start)))
        h2o.verboseprint(h2o.nodes)
        for n in h2o.nodes:
            c = n.get_cloud()
            h2o.verboseprint(h2o.dump_json(c))
            self.assertEqual(c['cloud_size'], len(h2o.nodes), 'inconsistent cloud size')
        h2o.tear_down_cloud(h2o.nodes)
        baseport += (ports_per_node * tryNodes)
