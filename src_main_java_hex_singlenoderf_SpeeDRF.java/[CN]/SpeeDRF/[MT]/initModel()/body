{
  try {
    source.read_lock(self());
    double[] weights=new double[(int)(response.max() - response.min() + 1)];
    float[] samples=new float[(int)(response.max() - response.min() + 1)];
    for (int i=0; i < samples.length; ++i)     samples[i]=(float)67.0;
    for (int i=0; i < weights.length; ++i)     weights[i]=1.0;
    SpeeDRFModel model=new SpeeDRFModel(dest(),self(),source._key,source,response,new Key[0]);
    model.bin_limit=bin_limit;
    if (mtry == -1) {
      model.mtry=(int)Math.floor(Math.sqrt(source.numCols()));
    }
    model.features=source.numCols();
    model.sampling_strategy=Sampling.Strategy.RANDOM;
    model.sample=(float)sample;
    model.weights=weights;
    model.time=0;
    model.total_trees=num_trees;
    model.strata_samples=samples;
    model.depth=max_depth;
    return model;
  }
  finally {
    source.unlock(self());
  }
}
