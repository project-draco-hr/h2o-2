{
  Errors e=new Errors();
  Input input=(Input)ls[0];
  long len=input._len;
  if (n != 0)   len=Math.min(len,n);
  if (ls[ls.length - 1] instanceof Softmax) {
    int correct=0;
    for (input._pos=0; input._pos < len; input._pos++) {
      if (((Softmax)ls[ls.length - 1]).target() == -2)       continue;
      if (correct(ls,e,cm))       correct++;
    }
    e.classification=(len - (double)correct) / len;
    e.mean_square/=len;
  }
 else {
    for (input._pos=0; input._pos < len; input._pos++)     if (!Float.isNaN(ls[ls.length - 1]._a[0]))     error(ls,e);
    e.classification=Double.NaN;
    e.mean_square/=len;
  }
  input._pos=0;
  return e;
}
