{
  long now=System.currentTimeMillis();
  int idx=_idx;
  _dms[idx]=(int)Math.min(now - ((idx & 1) == 0 ? _timeBlock : _timeRun),Integer.MAX_VALUE);
  int rms=0, bms=0;
  for (int i=0; i < _dms.length; i+=2) {
    bms+=_dms[i + 0];
    rms+=_dms[i + 1];
  }
  double duty=(double)rms / (bms + rms) * 100.0;
  return Math.max(Math.min((int)(duty + 0.5),100),0);
}
