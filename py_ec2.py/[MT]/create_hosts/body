def create_hosts(instances, key_filename=PEM):
    'Create RemoteHosts from a list of instances or a reservation'
    if (type(instances) is boto.ec2.instance.Reservation):
        instances = [i for i in instances.instances]
    try:
        return [Ec2Host(i, key_filename=key_filename) for i in instances]
    except socket.error as e:
        conn_err = e.errno
        if ((conn_err == 61) or (conn_err == 54) or (conn_err == 111) or (conn_err == 104) or (conn_err == 10061)):
            time.sleep(10)
            return [Ec2Host(i, key_filename=key_filename) for i in instances]
        raise
