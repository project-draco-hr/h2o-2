{
  String s=Double.isNaN(d) ? "NaN" : ((d == Double.MAX_VALUE || d == Double.MIN_VALUE) ? " -" : Double.toString(d));
  if (s.length() <= w)   return p(sb,s,w);
  s=String.format("%4.1f",d);
  if (s.length() > w)   s=String.format("%4.0f",d);
  return sb.append(s);
}
