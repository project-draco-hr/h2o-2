{
  Job job=findJob();
  JsonObject jsonResponse=defaultJsonResponse();
  if (job != null && job.isCancelled()) {
    String msg=job.exception == null ? "Job was cancelled by user!" : job.exception;
    return Response.error(msg);
  }
  if (job == null || job.end_time != 0)   return jobDone(job,jsonResponse);
  return jobInProgress(job,jsonResponse);
}
