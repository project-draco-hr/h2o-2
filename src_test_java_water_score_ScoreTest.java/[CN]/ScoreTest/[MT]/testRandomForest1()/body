{
  File file=find_test_file("smalldata/pmml/iris_rf_1tree.pmml");
  RFScoreModel rfm=(RFScoreModel)PMMLParser.parse(new BufferedInputStream(new FileInputStream(file)));
  Key irisk=loadAndParseKey("iris.hex","smalldata/iris/iris2.csv");
  ValueArray ary=DKV.get(irisk).get();
  AutoBuffer bits=ary.getChunk(0);
  int rows=ary.rpc(0);
  int errs=0;
  for (int i=0; i < rows; i++) {
    HashMap<String,Comparable> row=new HashMap();
    for (int j=0; j < ary._cols.length; j++)     row.put(ary._cols[j]._name,ary.datad(bits,i,j));
    int pr=(int)rfm.score(row);
    int ac=(int)ary.data(bits,i,4);
    if (pr != ac)     errs++;
  }
  Assert.assertEquals(2,errs);
  UKV.remove(irisk);
}
