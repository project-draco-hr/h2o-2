def test_remote_Cloud(self):
    trial = 0
    nodes_per_host = 1
    for i in range(1, 10):
        sys.stdout.write('.')
        sys.stdout.flush()
        timeoutSecs = max(60, (2 * (len(h2o_hosts.hosts) * nodes_per_host)))
        h2o.build_cloud(nodes_per_host, hosts=h2o_hosts.hosts, timeoutSecs=60, retryDelaySecs=1)
        for n in h2o.nodes:
            h2o.stabilize_cloud(n, len(h2o.nodes), timeoutSecs=30, retryDelaySecs=1)
        for n in h2o.nodes:
            print 'Checking n:', n
            c = n.get_cloud()
            self.assertFalse((c['cloud_size'] > len(h2o.nodes)), 'More nodes than we want. Zombie JVMs to kill?')
            self.assertEqual(c['cloud_size'], len(h2o.nodes), 'inconsistent cloud size')
        trial += 1
        print 'Sending shutdown to cloud, trial', trial
        h2o.nodes[0].shutdown_all()
        time.sleep(1)
        print 'Tearing down cloud, trial', trial
        sys.stdout.write('.')
        sys.stdout.flush()
        h2o.tear_down_cloud()
        h2o.clean_sandbox()
        h2o.verboseprint('Waiting', nodes_per_host, 'seconds to avoid OS sticky port problem')
        time.sleep(nodes_per_host)
